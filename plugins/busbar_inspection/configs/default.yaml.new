# 母线自主巡视插件配置 (C组)
# 按照 README.md 规范的完整配置

# ============================================================
# 模型配置
# ============================================================
model:
  model_path: "models/busbar_det.onnx"
  model_version: "busbar-det@1.2.0"
  input_size: 640

# ============================================================
# 运行时配置
# ============================================================
runtime:
  providers: ["CUDAExecutionProvider", "CPUExecutionProvider"]
  batch_size: 8

# ============================================================
# 切片配置（用于远距小目标检测）
# ============================================================
tiling:
  tile_size: 1280
  overlap: 320
  roi_margin_px: 10

# ============================================================
# 检测阈值
# ============================================================
thresholds:
  conf_thr: 0.25      # 置信度阈值
  nms_iou: 0.50       # NMS IoU阈值

# ============================================================
# 质量评估配置
# ============================================================
quality:
  blur_thr: 0.35         # clarity_score < 0.35 => 模糊
  y_high: 245            # 过曝阈值
  overexp_ratio: 0.25    # 高亮像素比例阈值
  dr_min: 35             # 动态范围过低视为低对比/逆光
  edge_thr: 10           # 边缘能量阈值（用于遮挡检测）

# ============================================================
# 变焦建议配置
# ============================================================
zoom:
  target_px: 90          # 希望小目标最终达到的像素尺寸
  min_obj_px: 18         # <18px 直接建议变焦
  zmin: 1.0              # 最小变焦倍率
  zmax: 12.0             # 最大变焦倍率

# ============================================================
# 检测标签（支持的缺陷类型）
# ============================================================
labels:
  - ok
  - pin_missing          # 销钉缺失
  - crack                # 裂纹
  - loose_fitting        # 金具松动
  - broken_part          # 部件破损
  - foreign_object       # 异物悬挂

# ============================================================
# 告警规则
# ============================================================
rules:
  alarm_thr_high: 0.75   # 高级别告警阈值
  alarm_thr_mid: 0.60    # 中级别告警阈值
  low_conf_thr: 0.40     # 低置信度阈值（需复核）
