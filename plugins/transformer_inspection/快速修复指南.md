# ğŸ”§ ä¸»å˜å·¡è§†æ’ä»¶ - å¿«é€Ÿä¿®å¤æŒ‡å—

## é—®é¢˜ç°è±¡

Web UI æ˜¾ç¤ºï¼š**"åŠŸèƒ½æ¨¡å—å¾…é›†æˆ"** âš ï¸

## åŸå› åˆ†æ

æ’ä»¶ä»£ç å·²ç»å®Œæˆï¼Œä½†æœ‰3ä¸ªå¯èƒ½çš„åŸå› å¯¼è‡´æœªè¢«åŠ è½½ï¼š

1. âŒ **æ’ä»¶æ–‡ä»¶ä¸åœ¨æ­£ç¡®ä½ç½®** - æœ€å¸¸è§
2. âŒ **å¹³å°æœªé‡å¯** - éœ€è¦é‡æ–°åŠ è½½æ’ä»¶
3. âŒ **æ’ä»¶ç®¡ç†å™¨é…ç½®é—®é¢˜** - éœ€è¦æ£€æŸ¥ä»£ç 

---

## ğŸš€ å¿«é€Ÿä¿®å¤æ–¹æ¡ˆï¼ˆ5åˆ†é’Ÿï¼‰

### æ–¹æ¡ˆAï¼šç›´æ¥å¤åˆ¶æ’ä»¶ï¼ˆæ¨èï¼‰

```bash
# 1. è¿›å…¥ä½ çš„é¡¹ç›®æ ¹ç›®å½•
cd /path/to/your/project

# 2. ç¡®è®¤ plugins ç›®å½•å­˜åœ¨
ls -la plugins/

# 3. å¤åˆ¶æ’ä»¶ï¼ˆä»æˆ‘æä¾›çš„æ–‡ä»¶ï¼‰
cp -r /mnt/user-data/outputs/transformer_inspection plugins/

# 4. éªŒè¯æ–‡ä»¶
ls -la plugins/transformer_inspection/

# åº”è¯¥çœ‹åˆ°:
# - manifest.json
# - plugin.py
# - detector.py
# - __init__.py
# - configs/
# - tests/

# 5. é‡å¯å¹³å°
python run.py
```

### æ–¹æ¡ˆBï¼šä½¿ç”¨è¯Šæ–­å·¥å…·

```bash
# 1. ä¸‹è½½è¯Šæ–­è„šæœ¬
# ï¼ˆä»ä¸Šé¢çš„ diagnose_plugin.pyï¼‰

# 2. è¿è¡Œè¯Šæ–­
cd /path/to/your/project
python diagnose_plugin.py

# 3. æ ¹æ®è¾“å‡ºæç¤ºæ“ä½œ
```

---

## ğŸ“ è¯¦ç»†æ’æŸ¥æ­¥éª¤

### æ­¥éª¤1ï¼šæ£€æŸ¥æ–‡ä»¶ä½ç½® â­ æœ€é‡è¦

```bash
# æ£€æŸ¥ä½ çš„é¡¹ç›®ç»“æ„
cd /path/to/your/project
tree plugins/transformer_inspection

# åº”è¯¥çœ‹åˆ°:
plugins/transformer_inspection/
â”œâ”€â”€ manifest.json           # å¿…é¡»å­˜åœ¨
â”œâ”€â”€ plugin.py               # å¿…é¡»å­˜åœ¨  
â”œâ”€â”€ detector.py             # å¿…é¡»å­˜åœ¨
â”œâ”€â”€ __init__.py             # å¿…é¡»å­˜åœ¨
â”œâ”€â”€ configs/
â”‚   â””â”€â”€ default.yaml
â””â”€â”€ tests/
    â””â”€â”€ test_plugin.py
```

**å¦‚æœç›®å½•ä¸å­˜åœ¨æˆ–æ–‡ä»¶ä¸å…¨**ï¼š
```bash
# ä»æˆ‘æä¾›çš„æ–‡ä»¶å¤åˆ¶
cp -r /mnt/user-data/outputs/transformer_inspection plugins/
```

### æ­¥éª¤2ï¼šéªŒè¯ manifest.json

```bash
# æŸ¥çœ‹ manifest.json å†…å®¹
cat plugins/transformer_inspection/manifest.json

# ç¡®è®¤åŒ…å«ä»¥ä¸‹å­—æ®µ:
# {
#     "id": "transformer_inspection",
#     "name": "ä¸»å˜è‡ªä¸»å·¡è§†æ’ä»¶",
#     "version": "1.0.0",
#     "entrypoint": "plugin.py",
#     "plugin_class": "TransformerInspectionPlugin",
#     ...
# }
```

**å¦‚æœæ ¼å¼é”™è¯¯**ï¼š
- é‡æ–°ä¸‹è½½æˆ‘æä¾›çš„ manifest.json
- æˆ–ç”¨æ–‡æœ¬ç¼–è¾‘å™¨ä¿®å¤ JSON æ ¼å¼

### æ­¥éª¤3ï¼šæµ‹è¯•æ’ä»¶åŠ è½½

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /path/to/your/project

# æµ‹è¯•å¯¼å…¥
python3 << EOF
from platform_core.plugin_manager import PluginManager

pm = PluginManager()
plugins = pm.discover_plugins()

print(f"å‘ç° {len(plugins)} ä¸ªæ’ä»¶:")
for p in plugins:
    print(f"  - {p.id} v{p.version}")

# å°è¯•åŠ è½½ä¸»å˜æ’ä»¶
if any(p.id == "transformer_inspection" for p in plugins):
    plugin = pm.load_plugin("transformer_inspection")
    print(f"\nâœ“ ä¸»å˜å·¡è§†æ’ä»¶åŠ è½½æˆåŠŸ!")
    print(f"  çŠ¶æ€: {plugin.status}")
else:
    print("\nâœ— æœªæ‰¾åˆ°ä¸»å˜å·¡è§†æ’ä»¶")
EOF
```

### æ­¥éª¤4ï¼šæ£€æŸ¥å¹³å°æ—¥å¿—

```bash
# æŸ¥çœ‹å¹³å°æ—¥å¿—
tail -n 50 logs/platform.log

# æŸ¥æ‰¾å…³é”®ä¿¡æ¯:
# - "å‘ç° N ä¸ªæ’ä»¶"
# - "æ’ä»¶åŠ è½½æˆåŠŸ: transformer_inspection"
# - æˆ–ä»»ä½•é”™è¯¯ä¿¡æ¯
```

### æ­¥éª¤5ï¼šé‡å¯å¹³å°

```bash
# åœæ­¢ç°æœ‰è¿›ç¨‹ï¼ˆå¦‚æœåœ¨è¿è¡Œï¼‰
pkill -f "python run.py"

# é‡æ–°å¯åŠ¨
python run.py

# æˆ–æŒ‡å®šå‚æ•°
python run.py --host 127.0.0.1 --port 8080 --reload
```

### æ­¥éª¤6ï¼šéªŒè¯ Web UI

è®¿é—®: http://127.0.0.1:8080/module/transformer

**é¢„æœŸç»“æœ**ï¼š
- âœ… æ˜¾ç¤º "æ’ä»¶å·²å°±ç»ª" ï¼ˆç»¿è‰²å¾½ç« ï¼‰
- âœ… å¯ä»¥çœ‹åˆ°åŠŸèƒ½ç•Œé¢

**å¦‚æœä»æ˜¾ç¤º "å¾…é›†æˆ"**ï¼š
- æ£€æŸ¥æµè§ˆå™¨ç¼“å­˜ï¼ˆCtrl+F5 å¼ºåˆ¶åˆ·æ–°ï¼‰
- æ£€æŸ¥ API: http://127.0.0.1:8080/api/plugins/transformer_inspection

---

## ğŸ” å¸¸è§é—®é¢˜

### Q1: æ’ä»¶ç›®å½•å­˜åœ¨ï¼Œä½†ä»æ˜¾ç¤º"å¾…é›†æˆ"

**å¯èƒ½åŸå› **:
1. manifest.json æ ¼å¼é”™è¯¯ï¼ˆJSON è¯­æ³•é”™è¯¯ï¼‰
2. plugin.py å¯¼å…¥å¤±è´¥ï¼ˆç¼ºå°‘ä¾èµ–ï¼‰
3. å¹³å°æœªé‡å¯

**è§£å†³æ–¹æ¡ˆ**:
```bash
# éªŒè¯ JSON æ ¼å¼
python3 -m json.tool plugins/transformer_inspection/manifest.json

# æµ‹è¯•å¯¼å…¥
cd plugins/transformer_inspection
python3 -c "from plugin import TransformerInspectionPlugin; print('âœ“ å¯¼å…¥æˆåŠŸ')"

# é‡å¯å¹³å°
pkill -f run.py
python run.py
```

### Q2: è¿è¡Œ run.py æŠ¥é”™

**é”™è¯¯ç¤ºä¾‹**:
```
ModuleNotFoundError: No module named 'platform_core'
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
# ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•
cd /path/to/your/project

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# æˆ–å¼€å‘æ¨¡å¼å®‰è£…
pip install -e .
```

### Q3: Web UI æ˜¾ç¤º 404

**å¯èƒ½åŸå› **: è·¯ç”±é…ç½®é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**:
æ£€æŸ¥ `apps/ui_server.py` ä¸­çš„ MODULES é…ç½®ï¼š

```python
MODULES = {
    "transformer": {
        "name": "ä¸»å˜è‡ªä¸»å·¡è§†",
        "plugin_id": "transformer_inspection",  # ç¡®ä¿è¿™ä¸ª ID æ­£ç¡®
        ...
    }
}
```

### Q4: API è¿”å›æ’ä»¶åˆ—è¡¨ä¸ºç©º

```bash
curl http://127.0.0.1:8080/api/plugins
# è¿”å›: []
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥æ’ä»¶ç›®å½•é…ç½®
grep -r "plugins_dir" configs/

# ç¡®ä¿é…ç½®æ­£ç¡®:
# plugin:
#   plugins_dir: "plugins"

# æ£€æŸ¥æ’ä»¶ç®¡ç†å™¨
python3 -c "
from platform_core.config import get_config
config = get_config()
print(f'æ’ä»¶ç›®å½•: {config.get_plugins_path()}')
"
```

---

## ğŸ“Š éªŒè¯æ¸…å•

å®Œæˆä»¥ä¸‹æ£€æŸ¥åï¼Œæ’ä»¶åº”è¯¥èƒ½æ­£å¸¸åŠ è½½ï¼š

- [ ] æ–‡ä»¶ä½ç½®æ­£ç¡®: `plugins/transformer_inspection/`
- [ ] å¿…éœ€æ–‡ä»¶å­˜åœ¨: manifest.json, plugin.py, detector.py, __init__.py
- [ ] manifest.json æ ¼å¼æ­£ç¡®ï¼ˆJSON æœ‰æ•ˆï¼‰
- [ ] ä¾èµ–å·²å®‰è£…: numpy, opencv-python
- [ ] å¹³å°å·²é‡å¯
- [ ] æµè§ˆå™¨å·²åˆ·æ–°ï¼ˆCtrl+F5ï¼‰
- [ ] æ—¥å¿—æ— é”™è¯¯: `logs/platform.log`

---

## ğŸ’¡ ä¸€é”®ä¿®å¤å‘½ä»¤

å¦‚æœä»¥ä¸Šæ­¥éª¤å¤ªå¤æ‚ï¼Œç›´æ¥è¿è¡Œï¼š

```bash
#!/bin/bash
set -e

# è¿›å…¥é¡¹ç›®æ ¹ç›®å½•ï¼ˆä¿®æ”¹ä¸ºä½ çš„è·¯å¾„ï¼‰
cd /path/to/your/project

# åˆ›å»ºæ’ä»¶ç›®å½•
mkdir -p plugins

# å¤åˆ¶æ’ä»¶
cp -r /mnt/user-data/outputs/transformer_inspection plugins/

# éªŒè¯æ–‡ä»¶
echo "æ£€æŸ¥æ’ä»¶æ–‡ä»¶..."
ls -la plugins/transformer_inspection/manifest.json
ls -la plugins/transformer_inspection/plugin.py
ls -la plugins/transformer_inspection/detector.py

# å®‰è£…ä¾èµ–ï¼ˆå¦‚æœéœ€è¦ï¼‰
pip install numpy opencv-python --quiet

# é‡å¯å¹³å°
echo "é‡å¯å¹³å°..."
pkill -f run.py || true
sleep 2
python run.py &

# ç­‰å¾…å¯åŠ¨
sleep 5

# éªŒè¯
echo "éªŒè¯æ’ä»¶..."
curl -s http://127.0.0.1:8080/api/plugins/transformer_inspection | python3 -m json.tool

echo "âœ… ä¿®å¤å®Œæˆï¼è®¿é—® http://127.0.0.1:8080/module/transformer æŸ¥çœ‹"
```

---

## ğŸ“ ä»ç„¶æœ‰é—®é¢˜ï¼Ÿ

1. **æŸ¥çœ‹å®Œæ•´æ—¥å¿—**: `cat logs/platform.log | grep -i "transformer\|plugin"`
2. **è¿è¡Œè¯Šæ–­å·¥å…·**: `python diagnose_plugin.py`
3. **æ‰‹åŠ¨æµ‹è¯•**: `cd plugins/transformer_inspection && python tests/test_plugin.py`
4. **æ£€æŸ¥ Python ç‰ˆæœ¬**: `python --version` (éœ€è¦ 3.10+)

---

## ğŸ¯ é¢„æœŸæœ€ç»ˆçŠ¶æ€

ä¿®å¤å®Œæˆåï¼š

1. âœ… Web UI æ˜¾ç¤º "âœ… æ’ä»¶å·²å°±ç»ª"
2. âœ… API è¿”å›æ’ä»¶ä¿¡æ¯: `/api/plugins/transformer_inspection`
3. âœ… å¥åº·æ£€æŸ¥é€šè¿‡: `/api/plugins/transformer_inspection/health`
4. âœ… å¯ä»¥è¿è¡Œæ£€æµ‹ä»»åŠ¡

**æˆåŠŸæ ‡å¿—**: é¡µé¢ä¸å†æ˜¾ç¤º"åŠŸèƒ½æ¨¡å—å¾…é›†æˆ"ï¼ğŸ‰
