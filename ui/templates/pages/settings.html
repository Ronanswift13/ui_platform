{% extends "base.html" %}

{% block title %}系统设置 - 输变电监测平台{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-3">
        <!-- 设置导航 -->
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0"><i class="bi bi-gear"></i> 设置</h5>
            </div>
            <div class="list-group list-group-flush">
                <a href="#general" class="list-group-item list-group-item-action active" data-bs-toggle="list">
                    <i class="bi bi-sliders"></i> 通用设置
                </a>
                <a href="#plugins" class="list-group-item list-group-item-action" data-bs-toggle="list">
                    <i class="bi bi-puzzle"></i> 插件管理
                </a>
                <a href="#devices" class="list-group-item list-group-item-action" data-bs-toggle="list">
                    <i class="bi bi-camera-video"></i> 设备管理
                </a>
                <a href="#sites" class="list-group-item list-group-item-action" data-bs-toggle="list">
                    <i class="bi bi-geo-alt"></i> 站点管理
                </a>
                <a href="#logs" class="list-group-item list-group-item-action" data-bs-toggle="list">
                    <i class="bi bi-journal-text"></i> 日志查看
                </a>
                <a href="#about" class="list-group-item list-group-item-action" data-bs-toggle="list">
                    <i class="bi bi-info-circle"></i> 关于
                </a>
            </div>
        </div>
    </div>

    <div class="col-lg-9">
        <div class="tab-content">
            <!-- 通用设置 -->
            <div class="tab-pane fade show active" id="general">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">通用设置</h5>
                    </div>
                    <div class="card-body">
                        <form>
                            <div class="mb-3">
                                <label class="form-label">平台名称</label>
                                <input type="text" class="form-control" value="输变电激光星芒监测平台">
                            </div>
                            <div class="mb-3">
                                <label class="form-label">日志级别</label>
                                <select class="form-select">
                                    <option value="DEBUG">DEBUG</option>
                                    <option value="INFO" selected>INFO</option>
                                    <option value="WARNING">WARNING</option>
                                    <option value="ERROR">ERROR</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">任务超时 (秒)</label>
                                <input type="number" class="form-control" value="300">
                            </div>
                            <div class="mb-3">
                                <label class="form-label">最大并发任务</label>
                                <input type="number" class="form-control" value="4">
                            </div>
                            <button type="submit" class="btn btn-primary">保存设置</button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- 插件管理 -->
            <div class="tab-pane fade" id="plugins">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">插件管理</h5>
                        <button class="btn btn-sm btn-primary" id="btn-scan-plugins">
                            <i class="bi bi-arrow-repeat"></i> 扫描插件
                        </button>
                    </div>
                    <div class="card-body">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>插件ID</th>
                                    <th>名称</th>
                                    <th>版本</th>
                                    <th>状态</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody id="plugin-table">
                                <!-- 动态加载 -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- 设备管理 -->
            <div class="tab-pane fade" id="devices">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">设备管理</h5>
                        <button class="btn btn-sm btn-primary">
                            <i class="bi bi-plus"></i> 添加设备
                        </button>
                    </div>
                    <div class="card-body">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>设备ID</th>
                                    <th>类型</th>
                                    <th>名称</th>
                                    <th>状态</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody id="device-table">
                                <!-- 动态加载 -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- 站点管理 -->
            <div class="tab-pane fade" id="sites">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">站点管理</h5>
                    </div>
                    <div class="card-body">
                        <p class="text-muted">站点配置功能开发中...</p>
                    </div>
                </div>
            </div>

            <!-- 日志查看 -->
            <div class="tab-pane fade" id="logs">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">日志查看</h5>
                        <div>
                            <select class="form-select form-select-sm d-inline-block w-auto">
                                <option value="platform">平台日志</option>
                                <option value="errors">错误日志</option>
                            </select>
                            <button class="btn btn-sm btn-outline-primary">
                                <i class="bi bi-arrow-repeat"></i> 刷新
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <pre class="bg-dark text-light p-3" style="max-height: 500px; overflow-y: auto;" id="log-content">
正在加载日志...
                        </pre>
                    </div>
                </div>
            </div>

            <!-- 关于 -->
            <div class="tab-pane fade" id="about">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">关于</h5>
                    </div>
                    <div class="card-body text-center">
                        <h2 class="text-primary"><i class="bi bi-lightning-charge"></i></h2>
                        <h3>输变电激光星芒破夜绘明监测平台</h3>
                        <p class="text-muted">版本 1.0.0</p>
                        <hr>
                        <p>高智能化输变电站自主巡视与监测系统</p>
                        <p class="small text-muted">
                            支持主变巡视、开关间隔、母线巡视、电容器检测、表计读数等功能模块
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
